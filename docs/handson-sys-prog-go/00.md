# 零、前言

这本书将提供各种有趣的 Go 概念的良好、深入的解释。它从 Unix 和系统编程开始，这将帮助您了解 Unix 操作系统必须提供哪些组件，从内核 API 到文件系统，并让您熟悉系统编程的基本概念。

接下来，将介绍 I/O 操作的应用，重点介绍 Unix 操作系统中的文件系统、文件和流。它涵盖了许多主题，包括读取和写入文件以及其他 I/O 操作。

这本书还展示了各种过程如何相互通信。它解释了如何在 Go 中使用基于 Unix 管道的通信，如何处理应用程序内部的信号，以及如何使用网络进行有效通信。此外，它还展示了如何对数据进行编码以提高通信速度。

本书最后将帮助您理解 Go 并发最现代的特性。它将向您介绍该语言拥有的工具、同步和通道，以及如何和何时使用每种工具。

# 这本书是给谁的

这本书是为那些想学习 Go 系统编程的开发人员准备的。虽然没有 Unix 和 Linux 系统编程的先验知识是必要的，但一些 Go 的中级知识将帮助您理解本书中涵盖的概念。

# 这本书涵盖的内容

[第 1 章](01.html)*系统编程简介*，介绍 Go 和系统编程，并提供一些基本概念和 Unix 及其资源的概述，包括内核 API。它还定义了本书其余部分使用的许多概念。

[第 2 章](02.html)*Unix 操作系统组件*重点介绍 Unix 操作系统以及与文件和文件系统、进程、用户和权限、线程等交互的组件。它还解释了操作系统的各种内存管理技术，以及 Unix 如何处理驻留内存和虚拟内存。

[第 3 章](03.html)*Go*概述，从语言的一些历史开始，然后逐一解释其所有基本概念，从名称空间和类型系统、变量和流控制开始，最后是内置函数和并发模型，同时也解释了 Go 是如何交互和管理其内存的。

[第 4 章](04.html)*使用文件系统*，帮助您了解 Unix 文件系统是如何工作的，以及如何掌握 Go 标准库来处理文件路径操作、文件读取和文件写入。

[第 5 章](05.html)*处理流*帮助您了解 Go 用于抽象数据流的输入和输出流接口。它解释了它们是如何工作的，以及如何组合它们并在不泄露信息的情况下最佳地使用它们。

[第 6 章](06.html)*构建伪终端*，帮助您了解伪终端应用程序的工作原理以及如何创建伪终端应用程序。结果将是一个交互式应用程序，它与命令行一样使用标准流。

[第 7 章](07.html)*处理进程和守护进程*解释了什么是进程以及如何在 Go 中处理它们，如何从 Go 应用程序启动子进程，以及如何创建留在后台（守护进程）并与之交互的命令行应用程序。

[第 8 章](08.html)*导出代码、信号和管道*讨论了 Unix 进程间通信。它解释了如何有效地使用退出代码。它向您展示了在应用程序内部默认情况下如何处理信号，以及如何使用一些模式来管理这些信号，从而实现有效的信号处理。此外，它还解释了如何使用管道连接不同进程的输出和输入。

[第 9 章](09.html)*网络编程*解释了如何使用网络使进程通信。它解释了网络通信协议是如何工作的。它最初侧重于低级套接字通信，如 TCP 和 UDP，然后使用众所周知的 HTTP 协议进行 web 服务器开发。最后，展示了如何使用 Go 模板引擎。

[第 10 章](10.html)*使用 Go*进行数据编码，说明如何利用 Go 标准库对复杂的数据结构进行编码，以方便流程通信。它分析基于文本的协议（如 XML 和 JSON）和基于二进制的协议（如 GOB）。

[第 11 章](11.html)*涉及通道和 goroutine*，解释了并发和通道的基本原理，以及一些防止在应用程序内部产生死锁和资源泄漏的一般规则。

[第 12 章](12.html)*同步与原子*讨论了`sync`和`sync/atomic`标准库的同步包，以及如何使用它们代替通道轻松实现并发。它还注重避免资源泄漏和资源回收。

[第 13 章](13.html)，*使用**上下文*进行协调，讨论了`Context`，Go 中引入的一个相对较新的包，它提供了一种有效处理异步操作的简单方法。

[第 14 章](14.html)*实现并发模式*使用了前三章中的工具，并演示了如何使用和组合它们来进行有效通信。它主要关注 Go for 并发中使用的最常见的模式。

[第 15 章](15.html)*使用反射*解释反射是什么以及是否应该使用反射。它显示了它在标准库中的使用位置，并指导您创建一个实际示例。它还展示了如何避免在不需要使用反射的地方使用反射。

[第 16 章](16.html)*使用 CGO*解释了 CGO 是如何工作的以及为什么以及何时应该使用它。它解释了如何在 Go 应用程序中使用 C 代码，反之亦然。

# 充分利用这本书

尝试示例和构建现代应用程序需要一些 Go 的基本知识。

每一章都包含一组问题，这些问题将帮助您评估您对本章的理解。本书的*评估*部分提供了这些问题的答案。这些问题将证明对您非常有益，因为它们将帮助您重新浏览每一章。

除此之外，每章都为您提供了如何运行代码文件的说明，而本书的 GitHub 存储库提供了必要的详细信息。

# 下载示例代码文件

您可以从您的账户[www.packt.com](http://www.packt.com)下载本书的示例代码文件。如果您在其他地方购买了本书，您可以访问[www.packt.com/support](http://www.packt.com/support)并注册，将文件通过电子邮件直接发送给您。

您可以通过以下步骤下载代码文件：

1.  登录或注册[www.packt.com](http://www.packt.com)。
2.  选择“支持”选项卡。
3.  点击代码下载和勘误表。
4.  在搜索框中输入图书名称，然后按照屏幕上的说明进行操作。

下载文件后，请确保使用以下最新版本解压或解压缩文件夹：

*   WinRAR/7-Zip for Windows
*   适用于 Mac 的 Zipeg/iZip/UnRarX
*   适用于 Linux 的 7-Zip/PeaZip

该书的代码包也托管在 GitHub 上的[https://github.com/PacktPublishing/Hands-On-System-Programming-with-Go](https://github.com/PacktPublishing/Hands-On-System-Programming-with-Go) 。如果代码有更新，它将在现有 GitHub 存储库中更新。

我们的丰富书籍和视频目录中还有其他代码包，请访问**[https://github.com/PacktPublishing/](https://github.com/PacktPublishing/)** 。看看他们！

# 下载彩色图像

我们还提供了一个 PDF 文件，其中包含本书中使用的屏幕截图/图表的彩色图像。您可以在这里下载：[https://static.packt-cdn.com/downloads/9781789804072_ColorImages.pdf](https://static.packt-cdn.com/downloads/9781789804072_ColorImages.pdf) 。

# 行动中的代码

访问以下链接查看正在运行的代码的视频：[http://bit.ly/2ZWgJb5](http://bit.ly/2ZWgJb5) 。

# 游乐场示例

在这本书中，你会发现许多代码片段，后面有一个指向[的链接 https://play.golang.org](https://play.golang.org) ，一种允许您运行 Go 应用程序的服务，但有一些限制。您可以在[上了解更多信息 https://blog.golang.org/playground](https://blog.golang.org/playground) 。

为了查看这些示例的完整源代码，您需要访问 Playerly 链接。进入网站后，您可以按 Run 按钮执行应用程序。页面底部将显示输出。以下是在 Go 场中运行的代码示例：

![](img/ea782ebb-71ed-4d93-a9bb-3211d5d063b3.png)

如果您愿意，您可以通过向示例中添加和编辑更多代码，然后运行它们来进行试验。

# 使用的惯例

本书中使用了许多文本约定。

`CodeInText`：表示文本中的码字、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄。这里有一个例子：“这种类型的服务包括`load`，它将程序添加到内存中，并在将控制权传递给程序本身之前准备执行；或者`execute`，它在预先存在的进程的上下文中运行可执行文件。”

代码块设置如下：

```go
<meta name="go-import" content="package-name vcs repository-url">
```

任何命令行输入或输出的编写方式如下：

```go
Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux
```

**粗体**：表示一个新术语、一个重要单词或您在屏幕上看到的单词。例如，菜单或对话框中的单词出现在文本中，如下所示。下面是一个例子：“与此同时，系统开始被分发，应用程序开始被装入容器中，由其他系统软件（如**Kubernetes**等）协调。”

警告或重要提示如下所示。

提示和技巧如下所示。

# 联系

我们欢迎读者的反馈。

**一般反馈**：如果您对本书的任何方面有疑问，请在邮件主题中注明书名，并发送电子邮件至`customercare@packtpub.com`。

**勘误表**：尽管我们已尽一切努力确保内容的准确性，但还是会出现错误。如果您在本书中发现错误，如果您能向我们报告，我们将不胜感激。请访问[www.packt.com/submit-errata](http://www.packt.com/submit-errata)，选择您的书籍，点击 errata 提交表单链接，并输入详细信息。

**盗版**：如果您在互联网上发现我们作品的任何形式的非法复制品，请您提供我们的位置地址或网站名称，我们将不胜感激。请通过`copyright@packt.com`与我们联系，并提供该材料的链接。

**如果您有兴趣成为一名作家**：如果您对某个主题有专业知识，并且您有兴趣撰写或贡献一本书，请访问[authors.packtpub.com](http://authors.packtpub.com/)。

# 评论

请留下评论。一旦你阅读并使用了这本书，为什么不在你购买它的网站上留下评论呢？然后，潜在读者可以看到并使用您的无偏见意见做出购买决定，我们 Packt 可以了解您对我们产品的看法，我们的作者可以看到您对他们书籍的反馈。非常感谢。

有关 Packt 的更多信息，请访问[Packt.com](http://www.packt.com/)。